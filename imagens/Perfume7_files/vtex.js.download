!function(){"use strict";var m="",e=document.location.href;if(-1!=e.indexOf("checkout")&&-1==e.indexOf("orderPlaced")){var t=!!("undefined"!=typeof vtexjs&&vtexjs.checkout&&vtexjs.checkout.orderForm&&vtexjs.checkout.orderForm.marketingData)&&vtexjs.checkout.orderForm.marketingData;if(t&&0<t.marketingTags.length&&"vtexSocialSelling"==t.marketingTags[0])return;m="checkout",function t(){var e=document.querySelectorAll("[data-sku].product-item");if(!e||"undefined"==typeof cart||!((cart||{}).items||h)().length)return setTimeout(function(){t()},1e3);g(e);var n=document.querySelector("#client-phone");null!=n&&n.addEventListener("blur",function(e){0<n.value.length&&(window._vv.push({page:m,event:"typed",data:[{phone:n.value.replace(/\D/g,"")}]}),window._vv.push({page:m,event:"load"}))});var a=document.querySelector("#client-pre-email");null!=a&&a.addEventListener("blur",function(e){0<a.value.length&&(window._vv.push({page:m,event:"typed",data:[{email:a.value}]}),window._vv.push({page:m,event:"load"}))});var o=document.querySelector("#client-email");null!=o&&o.addEventListener("blur",function(e){0<o.value.length&&(window._vv.push({page:m,event:"typed",data:[{email:o.value}]}),window._vv.push({page:m,event:"load"}))});var r=document.querySelector("#client-document");null!=r&&r.addEventListener("blur",function(e){0<r.value.length&&(window._vv.push({page:m,event:"typed",data:[{customerDocument:r.value.replace(/\D/g,"")}]}),window._vv.push({page:m,event:"load"}))});var u=document.querySelector("#client-first-name");null!=u&&u.addEventListener("blur",function(e){0<u.value.length&&(window._vv.push({page:m,event:"typed",data:[{customerName:u.value}]}),window._vv.push({page:m,event:"load"}))});var l=document.getElementById("cart-coupon");setTimeout(function(){null!=(l=document.getElementById("cart-coupon"))&&l.addEventListener("blur",function(e){0<l.value.length&&(window._vv.push({page:m,event:"typed",data:[{orderCupom:l.value}]}),window._vv.push({page:m,event:"load"}))})},3e3);var i=document.getElementById("cart-coupon-remove");null!=i&&i.addEventListener("click",function(e){setTimeout(function(){t()},600)});var d=document.getElementById("cart-link-coupon-add");null!=d&&d.addEventListener("click",function(e){setTimeout(function(){t()},600)});var c=document.querySelector(".link-box-edit");null!=c&&c.addEventListener("click",function(e){setTimeout(function(){t()},1e3)});var v=[];null!=n&&0<n.value.length&&v.push({phone:n.value.replace(/\D/g,"")});null!=a&&0<a.value.length&&v.push({email:a.value.trim()});null!=o&&0<o.value.length&&v.push({email:o.value.trim()});null!=r&&0<r.value.length&&v.push({customerDocument:r.value.replace(/\D/g,"")});null!=u&&0<u.value.length&&v.push({customerName:u.value.trim()});if(null!=l&&0<l.value.length)v.push({orderCupom:l.value.trim()});else{var p=document.querySelectorAll(".coupon-fields .info span")[0];null!=p&&null!=p.textContent&&""!=p.textContent&&v.push({orderCupom:p.textContent.trim()})}var s=document.getElementById("invoice-value")||document.querySelector(".monetary");s&&s.innerText&&s.innerText.length&&"indisponÃ­vel"!=s.innerText&&v.push({amount:parseFloat(s.innerText.toUpperCase().replace("R$","").replace(".","").replace(",",".").trim())});0<v.length&&(window._vv.push({page:m,event:"typed",data:v}),window._vv.push({page:m,event:"load"}))}()}function n(){if(dataLayer){var e=dataLayer.filter(function(e){return null!=e.transactionId})[0];if(!e||!e.transactionId){e={};var t=document.querySelector("main > section > header > p"),n=document.querySelector("main > section > div:last-child > div > div:last-child > strong");t&&t.innerText&&(e.transactionId=t.innerText.split("\n")[0].replace("Pedido #","")),n&&n.innerText&&(e.transactionTotal=parseFloat(n.innerText.replace(/R\$\s/g,"").replace(".","").replace(",",".")))}e.transactionId||(e.transactionId=window.location.href.split("og=")[1],e.transactionTotal=e.transactionTotal?e.transactionTotal:0),window._vv.push({page:m,event:"typed",data:[{orderNumber:e.transactionId},{orderValue:e.transactionTotal},{orderDeduplication:a("_vv_deduplication")}]}),window._vv.push({page:m,event:"load"})}else window._vv.push({page:m,event:"typed",data:[{orderNumber:window.location.href.split("og=")[1]},{orderValue:0},{orderDeduplication:a("_vv_deduplication")}]})}function g(e){for(var l=window.location.origin+"/checkout/cart/add?",i=[],t=cart.items(),d={},n=0;n<t.length;n++){var a=t[n],o=[].concat(a.categoryTree()),r=a.brand();r&&o.push(r);var u=a.id();u&&(d[u]=o.join("/"))}e.forEach(function(e){if(e){var t=e.dataset.sku,n=(e.querySelector(".quantity input")||{}).value||(e.querySelector(".quantity span")||{}).innerText,a=(e.querySelector("td.product-name > a")||{}).innerText,o=e.querySelector("td > a > img");o&&(o=o.attributes.src.value);var r=e.querySelector("td.product-price > span.best-price"),u="";r&&(u=r.innerText.replace(/\./g,"").replace(/\,/g,".").replace(/\D{0}[^\d\.]/g,"")),t&&n&&(l+="&sku="+t+"&qty="+n+"&seller=1"),a&&t&&n&&u&&u.length&&o&&o.length&&(u=u?parseFloat(u).toFixed(2):"",i.push({id:t,name:a,qty:n,amount:u,image:"https:"+o,category:d[t]}))}}),i.length&&(window._vv.push({page:m,event:"typed",data:[{products:i},{link:l+"&utm_source=venda-valida&utm_medium=sms&utm_campaign=abandono-checkout-sms"}]}),window._vv.push({page:m,event:"load"}))}function h(){return[]}function a(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}-1!=e.indexOf("orderPlaced")&&(m="confirmation",window.onload=function(){n()},n())}();